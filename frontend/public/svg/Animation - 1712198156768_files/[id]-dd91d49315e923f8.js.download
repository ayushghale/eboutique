(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142,3743,1957,3219,1698,9537],{33743:function(e,t,n){"use strict";n.r(t),n.d(t,{UploadStarterAnimation:function(){return k},default:function(){return C}});var o,r=n(55312),a=n(89303),i=n(24642),s=n.n(i),l=n(26766),c=n(46717),d=n(29901),u=n(24161),p=n(389),f=n(20016),m=n(99897),x=n(47381);!function(e){e.ANIKIHAMSTER="aniki-hamster",e.LOTTIELEGO="lottie-lego",e.POLITECHICKY="polite-chicky"}(o||(o={}));var v=n(97806),h=n(98326),w=n(48612),j=n(48319),g=n(61250),b=(0,c.zo)("div",{background:"#019D91",display:"flex",maxWidth:"162px",maxHeight:"162px",aspectRatio:"1/1",width:"100%",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer","&:hover":{background:"#00C1A2"},variants:{variant:{primary:{background:"#00C1A2","&:hover":{background:"#019D91"}},secondary:{background:"transparent",border:"1px solid #BFC8D1","&:hover":{background:"transparent",border:"1px solid #20272C"}}}},defaultVariants:{variant:"primary"}}),y=(0,c.zo)("div",{background:"#ffffff",display:"flex",maxWidth:"162px",maxHeight:"162px",aspectRatio:"1/1",width:"100%",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer",boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 2px 6px 0px rgba(61, 72, 83, 0.06), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);","&:hover":{boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 4px 12px 0px rgba(61, 72, 83, 0.12), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);"}}),k=function(e){var t=e.projectId,n=(0,v.X)(),i=(0,u.useSetRecoilState)(j._b),c=(0,p.Db)(w.H4),k=(0,a.Z)(c,2)[1],C=(0,d.useState)(!1),N=C[0],I=C[1],S=(0,h.cF)(),E=S.activeWorkspace,L=S.activeWorkspaceId,A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(0,l.Z9)(new l.Rd("button",e,t))},R=(0,d.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(n){var o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=15;break}return I(!0),e.prev=2,o={workspaceId:L,file:n,projectId:t},e.next=6,k({input:o});case 6:if(!(r=e.sent).error){e.next=9;break}throw new Error(r.error.message);case 9:r.data&&(window.location.href="/animation/".concat(r.data.initialAnimationUpload)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),I(!1);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[L,N,t,k]),_=(0,d.useCallback)((function(){A("create-animation-cta","dashboard-project-empty-state"),window.open("".concat("https://creator.lottiefiles.com","/new?workspace=").concat(null==E?void 0:E.id),"_blank")}),[E]);return(0,g.jsx)("div",{className:"w-full px-6 py-8 rounded-lg",style:{background:"#EAEFF2"},children:(0,g.jsxs)("div",{className:"flex flex-col w-full",children:[(0,g.jsxs)("h1",{className:"mb-8 text-lg text-center text-gray-900 font-lf-bold",children:[!n&&"Get started by uploading or opening an animation",n&&"Get started by creating, uploading or opening an animation"]}),(0,g.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap lg:gap-4 mx-auto",children:[N&&(0,g.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg opacity-50 bg-gray-50",children:(0,g.jsx)(x.a,{type:"spinner"})}),n&&(0,g.jsxs)("div",{className:"w-1/2 lg:flex-1 lg:w-auto text-center flex flex-col items-center px-2 lg:px-0",children:[(0,g.jsx)(b,{className:"rounded-lg transition",onClick:_,children:(0,g.jsx)(m.J,{name:"plus",color:"text-white",large:!0})}),(0,g.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Create animation"}),(0,g.jsx)("div",{className:"text-xs text-gray-400",children:"with Lottie Creator"})]}),(0,g.jsxs)("div",{className:"w-1/2 lg:flex-1 lg:w-auto text-center flex flex-col items-center px-2 lg:px-0",children:[(0,g.jsx)(b,{className:"rounded-lg",onClick:function(){i(!0),A("open upload modal","dashboard-project-empty-state")},children:(0,g.jsx)(m.J,{name:"upload",color:"text-white",large:!0})}),(0,g.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Upload an animation"}),(0,g.jsx)("div",{className:"text-xs text-gray-400",children:"Lottie JSON / dotLottie"})]}),(0,g.jsxs)("div",{className:"text-center lg:flex-1 w-1/3 lg:w-auto mt-8 lg:mt-0 flex flex-col items-center px-2 lg:px-0",children:[(0,g.jsx)(y,{className:"rounded-lg",onClick:function(){R(o.LOTTIELEGO),A("upload lottie lego","dashboard-project-empty-state")},children:(0,g.jsx)(f.J,{src:"/lotties/sample-animations/lottie-lego.json",hover:!0})}),(0,g.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Lottie lego"})]}),(0,g.jsxs)("div",{className:"text-center lg:flex-1 w-1/3 lg:w-auto mt-8 lg:mt-0 flex flex-col items-center px-2 lg:px-0",children:[(0,g.jsx)(y,{className:"rounded-lg",onClick:function(){R(o.POLITECHICKY),A("upload polite chicky","dashboard-project-empty-state")},children:(0,g.jsx)(f.J,{src:"/lotties/sample-animations/polite-chicky.json",hover:!0})}),(0,g.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Polite chicky"})]}),(0,g.jsxs)("div",{className:"text-center lg:flex-1 w-1/3 lg:w-auto mt-8 lg:mt-0 flex flex-col items-center px-2 lg:px-0",children:[(0,g.jsx)(y,{className:"rounded-lg",onClick:function(){R(o.ANIKIHAMSTER),A("upload aniki hamster","dashboard-project-empty-state")},children:(0,g.jsx)(f.J,{src:"/lotties/sample-animations/aniki-hamster.json",hover:!0})}),(0,g.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Aniki hamster"})]})]})]})})},C=k},77492:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var o=n(29901),r=n(24161),a=n(47642),i=n(47381),s=n(61250),l=o.forwardRef((function(e,t){var n=e.children,o=e.contentWrapperCssClasses,l=void 0===o?"flex-grow overflow-hidden":o,c=e.headerControl,d=e.headerWrapperCssClasses,u=void 0===d?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":d,p=e.id,f=(0,r.useRecoilValue)(a.qx);return(0,s.jsxs)("div",{id:p,ref:t,"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[c&&(0,s.jsx)("div",{className:u,children:c}),f?(0,s.jsx)(i.a,{size:"lg"}):(0,s.jsx)("div",{className:l,children:n})]})}));l.displayName="PageScaffold"},59069:function(e,t,n){"use strict";n.d(t,{H:function(){return v}});var o=n(26766),r=n(83849),a=n.n(r),i=n(29901),s=n(24161),l=n(47642),c=n(48319),d=n(97623),u=n(99897),p=n(20016),f=n(61250),m="https://creator.lottiefiles.com",x=function(e){var t=e.description,n=e.icon,o=e.title;return(0,f.jsxs)("div",{className:"flex gap-x-2",children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.J,{name:n,className:"text-teal-300"})}),(0,f.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,f.jsx)("div",{className:"font-lf-bold text-gray-900",children:o}),(0,f.jsx)("div",{className:"text-gray-600 tracking-tight",children:t})]})]})},v=function(e){var t=e.canCreateAnimations,n=void 0!==t&&t,r=e.canCreateFolder,v=void 0!==r&&r,h=e.canUpload,w=void 0!==h&&h,j=e.description,g=e.layout,b=void 0===g?"vertical":g,y=e.projectId,k=e.title,C=e.view,N=void 0===C?"dashboard":C,I=e.workspaceId,S=(0,s.useSetRecoilState)(c._b),E=(0,s.useSetRecoilState)(l.rU),L=(0,i.useCallback)((function(){(0,o.Z9)(new o.Rd("button","create-animation-cta","draft-empty-state"));var e="workspace=".concat(I);y&&(e+="&project=".concat(y)),window.open("".concat(m,"/new?").concat(e),"_blank")}),[y,I]),A=300;return"creator"===N?(0,f.jsxs)("div",{className:"flex flex-col text-gray-900 max-w-[600px]",children:[(0,f.jsx)("div",{className:"text-2xl font-lf-bold",children:k}),(0,f.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:j}),(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("iframe",{className:"w-full bg-transparent h-[338px]",src:"https://player.vimeo.com/video/908974038?title=0&byline=0&autoplay=1&autopause=0&app_id=122963",allow:"autoplay; fullscreen; picture-in-picture",title:"Lottie Creator: A powerful web-based Lottie creation tool","data-ready":"true"})}),(0,f.jsxs)("div",{className:"flex flex-col mt-6 gap-y-4",children:[(0,f.jsx)(x,{icon:"animate",title:"Smooth and sleek animations",description:"Have precise control over your animations by adjusting keyframes and creating seamless transitions."}),(0,f.jsx)(x,{icon:"segment-mockup",title:"Import assets to your canvas",description:"Import 7 million+ Lottie animations, illustrations and icons from our library, or insert your own SVGs."}),(0,f.jsx)(x,{icon:"lottie-thick",title:"Integrated with our ecosystem",description:"Enjoy tight integration with the LottieFiles ecosystem to convert to a variety of file formats."})]}),(0,f.jsx)("div",{className:"mt-6 w-full flex justify-center items-center",children:(0,f.jsx)(d.z,{onClick:L,additionalClass:"h-8 w-44 rounded-xl h-10",fontClasses:"font-lf-bold text-sm",icon:"plus",children:"Create animation"})})]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:a()({"flex items-center justify-center":!0,"flex-col":"vertical"===b,"flex-row":"horizontal"===b}),children:["dashboard"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-dashboard.json",style:{width:"".concat(A,"px")}}),"empty-project"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-project.json",style:{width:"".concat(A,"px")}}),"empty-shared-with-me"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-pour-bottle.json",style:{width:"".concat(A,"px")}}),"empty-project-folders"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-3-mugs.json",style:{width:"".concat(A,"px")}}),"no-results"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/search.json",style:{width:"".concat(A,"px")}}),"empty-collection"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-collection.json",style:{width:"".concat(A,"px")}}),(0,f.jsxs)("div",{className:a()({"flex flex-col text-gray-900":!0,"mt-6 items-center space-y-2":"vertical"===b,"ml-8":"horizontal"===b}),children:[(0,f.jsx)("div",{className:"text-2xl font-lf-bold",children:k}),(0,f.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:j}),w&&(0,f.jsx)("div",{children:(0,f.jsxs)("button",{type:"button",onClick:function(){return S(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:[(0,f.jsx)(u.J,{name:"plus"}),(0,f.jsx)("span",{children:"Upload animations"})]})}),v&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"button",onClick:function(){return E(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:(0,f.jsx)("span",{children:"Create Folder"})})}),n&&(0,f.jsx)("div",{children:(0,f.jsx)("a",{className:"inline-flex items-center h-10 px-4 py-0 mt-4 space-x-1 text-base leading-5 align-middle lf-btn primary",href:m,target:"_blank",rel:"noreferrer",children:"Create an animation"})})]})]})})}},21138:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var o=n(29901),r=n(75545),a=function(e){var t=e.scopes,n=(0,o.useCallback)((function(){return Boolean(null==t?void 0:t.includes(r.l.DOWNLOAD))}),[t]);return{hasUpdateAccess:(0,o.useCallback)((function(){return Boolean(null==t?void 0:t.includes(r.l.FULL_ACCESS))}),[t]),hasDownloadAccess:n}}},12562:function(e,t,n){"use strict";var o=n(29901);t.Z=function(e){var t=e.onPress,n=e.onRelease,r=e.dependencies,a=void 0===r?[]:r,i=e.takesPrecedence;(0,o.useEffect)((function(){var e=function(e){var n=document.activeElement;n&&n.isContentEditable||n&&"button"===n.tagName.toLowerCase()&&!i||"Shift"===e.key&&(e.preventDefault(),t())},o=function(e){var t=document.activeElement;t&&t.isContentEditable||t&&"button"===t.tagName.toLowerCase()&&!i||"Shift"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",e),window.removeEventListener("keydown",o)}}),a)}},1498:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var o=n(69452),r=n(89303),a=n(55312),i=n(24642),s=n.n(i),l=n(59715),c=n(26766),d=n(62295),u=n(53341),p=n(88406),f=n(26929),m=n(29901),x=n(24161),v=n(389),h=n(33743),w=n(78010),j=n(77492),g=n(59069),b=n(37576),y=n(1423),k=n(99729),C=n(25044),N=n(73901),I=n(21138),S=n(96240),E=n(12562),L=n(11957),A=n(98326),R=n(94459),_=n(89012),O=n(58773),F=n(81147),D=n(47642),P=n(48319),T=n(84258),M=n(80303),W=n(34916),U=n(13485),Z=n(90170),V=n(61250),J=(0,p.default)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(9019).then(n.bind(n,49019)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[49019]},modules:["project/[id].tsx -> @/components/features/download/select-zip-variation-modal-with-feature-service"]}}),G=(0,p.default)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(6660),n.e(7896),n.e(9421),n.e(6874),n.e(7382)]).then(n.bind(n,10876)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10876]},modules:["project/[id].tsx -> @/components/ui/headers/project-header"]}}),H=(0,p.default)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2762),n.e(6459),n.e(5595),n.e(661)]).then(n.bind(n,52979)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[52979]},modules:["project/[id].tsx -> @/components/ui/selection-bar"]}}),B=(0,p.default)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(467),n.e(6042),n.e(8518),n.e(9094)]).then(n.bind(n,97846)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[97846]},modules:["project/[id].tsx -> @/components/ui/views/grid-view"]}}),Y=(0,p.default)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(7255),n.e(467),n.e(6660),n.e(2762),n.e(9421),n.e(4284),n.e(6459),n.e(8958),n.e(4173),n.e(8326),n.e(8449),n.e(5512)]).then(n.bind(n,51172)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[51172]},modules:["project/[id].tsx -> @/components/ui/views/list-view"]}});function q(){var e,t,n,i,p,q,z,K,Q,X,$,ee,te,ne=(0,u.useRouter)(),oe=(0,k.a)().user,re=ne.query,ae=re.from,ie=re.id,se=re.sort,le=re.status,ce=re.type,de=(0,b.p)(),ue=(0,x.useSetRecoilState)(D.qx),pe=(0,m.useState)(!1),fe=pe[0],me=pe[1],xe=(0,x.useSetRecoilState)(P.QJ),ve=(0,m.useState)([]),he=ve[0],we=ve[1],je=(0,x.useSetRecoilState)(_.Y),ge=he.length>0,be=(0,m.useState)(!1),ye=be[0],ke=be[1],Ce=(0,m.useState)(null),Ne=Ce[0],Ie=Ce[1],Se=(0,m.useState)(!1),Ee=Se[0],Le=Se[1],Ae=(0,x.useRecoilValue)(T.Ol),Re=(0,x.useRecoilValue)(O.cd),_e=(0,l.SS)(d.AD.FILE_UPLOAD_LIMIT),Oe=(0,m.useState)(null),Fe=Oe[0],De=Oe[1],Pe=(0,m.useState)(!1),Te=Pe[0],Me=Pe[1],We=(0,m.useState)(null),Ue=We[0],Ze=We[1],Ve=(0,m.useState)(null),Je=Ve[0],Ge=Ve[1],He=(0,m.useState)(!1),Be=He[0],Ye=He[1];(0,E.Z)({onPress:function(){Me(!0)},onRelease:function(){Me(!1)}});var qe=(0,v.m8)(),ze=(0,v.aM)({query:R.ig,variables:{id:ie,orderBy:se||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),status:le,type:ce,first:24},pause:!ie}),Ke=(0,r.Z)(ze,1)[0],Qe=(0,A.hp)(null===(e=Ke.data)||void 0===e||null===(t=e.project)||void 0===t?void 0:t.workspaceId),Xe=(0,m.useMemo)((function(){return(0,U.fK)(Qe)}),[Qe]),$e=(0,m.useState)(null),et=$e[0],tt=$e[1],nt=(0,m.useState)(!1),ot=nt[0],rt=nt[1],at=_e.on&&Xe===M.Q.FREE,it=null===(n=Ke.data)||void 0===n||null===(i=n.projectFiles)||void 0===i?void 0:i.edges.map((function(e){return e.node}));(0,m.useEffect)((function(){Ke.fetching?ue(!0):(ue(!1),Ke.error?ne.push("/"):Ke.data&&Ke.data.projectFiles&&Ke.data.project&&(Ke.data.project.isSystem||xe({name:Ke.data.project.title,isPrivate:Boolean(Ke.data.project.isPrivate),projectTitle:Ke.data.project.title,type:"project",workspaceId:Ke.data.project.workspaceId,projectId:Ke.data.project.id}),(0,c.Z9)(new c.RG({projectId:Ke.data.project.id,projectName:Ke.data.project.title,workspaceId:Ke.data.project.workspaceId})),ue(!1),ke(Ke.data.projectFiles.pageInfo.hasNextPage),Ie(Ke.data.projectFiles.pageInfo.endCursor)))}),[Ke,ne,ue,xe]);var st=(0,m.useCallback)((function(e){Ze(Z.RT.LOADED);var t=he,n=t.map((function(e){return e.id})).indexOf(e);if(it){var r=it.find((function(t){return t.id===e}));if(!r)return;var a=it.indexOf(r);if(Te)if(null===Fe)t.push(r);else{var i=(0,Z.Jm)(Fe,a,it);n>-1?(0,Z.wh)(t,i):(0,Z.AW)(t,i)}else n>-1?t.splice(n,1):t.push(r);De(a)}0===t.length&&Ze(null),we((0,o.Z)(t)),je(t.length)}),[he,it,je,Fe,Te]),lt=(0,m.useCallback)((function(){Ze(null),je(0),we([]),De(null),Ye(!1)}),[je]),ct=(0,m.useCallback)((function(){Ae||Re?null==de||de.pushError(w.Vv):(tt(null),Le(!0))}),[Ae,Re,de]),dt=(0,m.useCallback)((function(){Ae||Re?null==de||de.pushError(w.Vv):(rt(!0),Le(!0))}),[Ae,Re,de]),ut=(0,m.useCallback)((function(){Le(!1),tt(null),rt(!1)}),[]),pt=(0,m.useCallback)((function(e,t){Ae||Re?null==de||de.pushError(w.Vv):(rt(!1),tt({id:e,name:t}),Le(!0))}),[Ae,Re,de]),ft=(0,m.useMemo)((function(){return et?1:ot||Ue===Z.RT.EVERYTHING?(null===(e=Ke.data)||void 0===e?void 0:e.projectFiles.totalCount)||0:he.length;var e}),[et,Ue,he,ot,Ke]),mt=(0,S.t)(),xt=(0,m.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(t){var n,o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=et?[{id:et.id,type:"FOLDER"}]:ot||Ue===Z.RT.EVERYTHING?[{id:ie,type:"PROJECT"}]:he.map((function(e){return{id:e.id,type:(0,W.qR)(e)?"FOLDER":"FILE"}})),rt(!1),tt(null),Le(!1),lt(),e.next=7,mt({entries:r,numberOfEntries:ft,projectId:ie,projectName:null===(n=Ke.data)||void 0===n||null===(o=n.project)||void 0===o?void 0:o.title,folderId:null==et?void 0:et.id,folderName:null==et?void 0:et.name,variant:t});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[et,null===(p=Ke.data)||void 0===p||null===(q=p.project)||void 0===q?void 0:q.title,ie,he,Ue,lt,mt,ft,ot]),vt=(0,C._)("project-view","grid"),ht=(0,r.Z)(vt,2),wt=ht[0],jt=ht[1],gt=(0,m.useCallback)((function(){jt("grid"===wt?"list":"grid"),(0,c.Z9)(new c.rR({projectId:ie,userId:null==oe?void 0:oe.id,view:"grid"===wt?"list":"grid"}))}),[wt,jt,ie,oe]),bt=(0,x.useRecoilValue)(F.h),yt=(0,m.useCallback)((function(){lt(),null==de||de.pushSuccess("".concat(he.length>1?"Assets were":"Asset was"," successfully transferred to ").concat(null==bt?void 0:bt.name,"."))}),[lt,he.length,null==bt?void 0:bt.name,de]),kt=(0,m.useCallback)((function(e){var t,n,r=he,a=null===(t=Ke.data)||void 0===t||null===(n=t.projectFiles)||void 0===n?void 0:n.edges.map((function(e){return e.node}));e?((0,Z.AW)(r,a||[]),je(r.length),Ze(Z.RT.LOADED),Ye(!0)):((0,Z.wh)(r,a||[]),je(r.length),Ze(null),Ye(!1)),we((0,o.Z)(r))}),[null===(z=Ke.data)||void 0===z||null===(K=z.projectFiles)||void 0===K?void 0:K.edges,he,je]),Ct=(0,m.useCallback)((0,a.Z)(s().mark((function e(){var t,n,o,r,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]&&a[0],it&&0!==(null==it?void 0:it.length)){e.next=3;break}return e.abrupt("return");case 3:return o=n&&Ke.data?(null===(t=Ke.data)||void 0===t?void 0:t.projectFiles.totalCount)-(null==it?void 0:it.length):24,r=at?Math.min(12,Math.abs(_e.value-(null==it?void 0:it.length))):o,e.prev=5,me(!0),e.next=9,qe.query(R.f3,{id:ie,status:le,type:ce,orderBy:se||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),after:Ne,first:r}).toPromise();case 9:return e.prev=9,me(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])}))),[it,Ke.data,at,_e.value,qe,ie,le,ce,se,Ne]),Nt=(0,m.useCallback)((function(){Ke.data&&!Ke.fetching&&!fe&&ye&&Ne&&Ct()}),[Ne,Ct,Ke.data,Ke.fetching,ye,fe]);(0,m.useEffect)((function(){lt()}),[ne.asPath,lt]);var It="https://creator.lottiefiles.com",St=(0,m.useCallback)((function(e,t){var n,o,r="shared-with-me"===ae;(((0,W.QR)(e)||(0,W.xK)(e))&&(n=e.fileObject.filename.split(".").pop()),"creator"===n)?window.open("".concat(It,"?fileId=").concat(e.id,"&utm_medium=platform&utm_source=file-card"),"_blank"):(o=(0,W.qR)(e)?"/folder/".concat(e.id):"/animation/".concat(e.id),se&&(o+="?sort=".concat(encodeURIComponent(se.toString()))),r&&(o+="".concat(se?"&":"?","from=shared-with-me")),t?window.open(o,"_blank"):ne.push(o))}),[ae,It,se,ne]),Et=(null===(Q=Ke.data)||void 0===Q?void 0:Q.project)||null,Lt=(0,m.useCallback)((0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!it){e.next=6;break}return e.next=3,qe.query(R.A0,{id:ie}).toPromise();case 3:(t=e.sent).data&&Ge(t.data.project.stats),we((0,o.Z)(it));case 6:Ze(Z.RT.EVERYTHING);case 7:case"end":return e.stop()}}),e)}))),[qe,ie,it]),At=he.length&&(null==it?void 0:it.some((function(e){return-1===he.findIndex((function(t){return t.id===e.id}))})))||!1,Rt=(0,N.k)(),_t=Rt.start,Ot=Rt.stop;(0,m.useEffect)((function(){return _t([y.aF]),function(){Ot(y.aF.id)}}),[Et]);var Ft=(0,I.O)({scopes:(null==Et?void 0:Et.projectPermissionScopes)||[]}),Dt=Ft.hasDownloadAccess,Pt=Ft.hasUpdateAccess,Tt=(0,m.useMemo)((function(){return"folders"!==ce&&(null==Et?void 0:Et.isSystem)&&"Drafts"===(null==Et?void 0:Et.title)}),[Et,ce]),Mt=(0,m.useMemo)((function(){return Tt&&(!it||it.length<=0)}),[Tt,it]),Wt=(0,m.useState)(!1),Ut=Wt[0],Zt=Wt[1];return(0,m.useEffect)((function(){Tt&&null!=oe&&oe.id&&!Ut&&((0,c.Z9)(new c.di({userId:oe.id})),Zt(!0))}),[Tt,null==oe?void 0:oe.id,Ut]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(f.default,{children:(0,V.jsx)("title",{children:"LottieFiles Platform"})}),(0,V.jsxs)(L.s,{features:null==Et?void 0:Et.features,children:[(0,V.jsx)(j.o,{headerWrapperCssClasses:"flex items-center px-6 flex-shrink-0 pt-6 pb-4",contentWrapperCssClasses:"flex-grow p-6 pt-0",headerControl:!Mt&&(0,V.jsx)(G,{selectedCount:he.length,loadedCount:(null==it?void 0:it.length)||0,showFilters:0!==(null==it?void 0:it.length)||(Boolean(le)||Boolean(ce)),totalCount:(null===(X=Ke.data)||void 0===X?void 0:X.projectFiles.totalCount)||0,onSelectAll:kt,selectionIsIndeterminate:At,isSelectionMode:ge,toggleProjectView:gt,projectView:wt,project:Et,fromSharedWithMe:"shared-with-me"===ae,selectionType:Ue,onSelectEverything:Lt,clearSelection:lt,showSelectionBanner:Be,onDownloadAllClick:dt,showSelectAll:Dt()||Pt()}),children:(0,V.jsx)("div",{className:"space-y-3 h-full",children:Et&&(0,V.jsxs)(V.Fragment,{children:[it&&it.length>0?(0,V.jsx)("div",{className:"space-y-4",children:"list"===wt?(0,V.jsx)(Y,{id:"project-list",files:it,selectionMode:ge,onSelectionChange:st,selectedAnimations:he,selectable:!0,canLoadMore:ye,onLoadMore:Nt,isLoadingMore:fe,onFolderDownloadAllClick:pt,onItemClick:St,workspaceId:Et.workspaceId}):(0,V.jsx)(B,{files:it,selectionMode:ge,onSelectionChange:st,selectedAnimations:he,selectable:!0,onLoadMore:Nt,canLoadMore:ye,isLoadingMore:fe,showAddToCollection:!0,onFolderDownloadAllClick:pt,onItemClick:St,workspaceId:Et.workspaceId})}):(0,V.jsxs)(V.Fragment,{children:[!le&&"folders"===ce&&(0,V.jsx)(g.H,{title:"Create folders for your animations",description:"Sort your animations into folders to stay organized.",view:"empty-project-folders",canCreateFolder:!0}),!le&&"folders"!==ce&&!Et.isSystem&&(null===($=Et.projectPermissionScopes)||void 0===$?void 0:$.includes("full_access"))&&(0,V.jsx)("div",{className:"pt-2",children:(0,V.jsx)(h.default,{projectId:Et.id})}),!le&&"folders"!==ce&&!Et.isSystem&&!(null!==(ee=Et.projectPermissionScopes)&&void 0!==ee&&ee.includes("full_access"))&&(0,V.jsx)(g.H,{title:"Animation added will appear here",description:"You can only view this project. Ask for full access to add animations.",view:"empty-project"}),!le&&Tt&&(0,V.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,V.jsx)(g.H,{title:"Create beautiful animations with Lottie Creator, our light yet powerful web-based tool",view:"creator",projectId:Et.id,workspaceId:Et.workspaceId,canCreateAnimations:!0})}),le&&(0,V.jsx)(g.H,{title:"No result found",description:"We couldn't find any item based on your filter.",view:"no-results"})]}),ge?(0,V.jsx)(H,{canDelete:Pt(),canDownload:Dt(),canMove:Pt(),canUpdateStatus:Pt(),canAddToCollection:Pt(),type:"project",resourceId:Et.id,workspaceId:Et.workspace.id,selectedAnimations:he,isPrivate:Et.isPrivate,clear:lt,onDownload:ct,onTransferComplete:yt,totalCount:(null===(te=Ke.data)||void 0===te?void 0:te.projectFiles.totalCount)||0,contentStats:Je,isEverythingSelected:Ue===Z.RT.EVERYTHING}):null]})})}),Ee&&(0,V.jsx)(J,{show:Ee,numberOfEntries:ft,onClose:ut,onSelect:xt,workspaceId:null==Et?void 0:Et.workspaceId})]})]})}},11957:function(e,t,n){"use strict";n.d(t,{s:function(){return s},w:function(){return l}});var o=n(62295),r=n(29901),a=n(61250),i=r.createContext({features:[]}),s=function(e){var t=e.children,n=e.features;return(0,a.jsx)(i.Provider,{value:{features:n},children:t})},l=function(){var e=r.useContext(i).features;return e?new o.UZ(e):new o.UZ([])}},89012:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var o=(0,n(24161).atom)({key:"selectedAnimationsCount",default:0})},85446:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var o=n(24161),r=(0,o.atom)({key:"transferSelectionAtom",default:null});(0,o.atom)({key:"createNewFolder",default:!1})},81147:function(e,t,n){"use strict";n.d(t,{h:function(){return o.h}});var o=n(85446)},34916:function(e,t,n){"use strict";var o,r,a,i,s,l,c;n.d(t,{GN:function(){return o},Nn:function(){return r},hF:function(){return a},eL:function(){return i},nT:function(){return l},ws:function(){return c},QR:function(){return p},xK:function(){return f},qR:function(){return m},yx:function(){return d}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(o||(o={})),function(e){e.Loop="Loop",e.PlayOnce="PlayOnce"}(r||(r={})),function(e){e.DotLottie="lottie",e.Gif="gif",e.LottieJson="json",e.Mp4="mp4"}(a||(a={})),function(e){e.GIF="gif",e.MOV="mov",e.MP4="mp4",e.WEBM="webm"}(i||(i={})),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(s||(s={})),function(e){e.Approved="Approved",e.InProgress="InProgress",e.NeedsReview="NeedsReview",e.Shipped="Shipped"}(l||(l={})),function(e){e.Completed="Completed",e.Failed="Failed",e.InProgress="InProgress",e.Pending="Pending"}(c||(c={}));var d,u=function(e){return e.split(".").pop()};function p(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&["lottie","json"].includes(n)}function f(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&"creator"===n}function m(e){return e&&"Folder"===e.__typename}!function(e){e.COLOR_PALETTE="color-palette",e.DIRECT="Direct",e.PREMIUM_ANIMTIONS="premium-animations",e.URL="URL"}(d||(d={}))},75545:function(e,t,n){"use strict";var o;function r(e){return"object"==typeof e&&null!==e&&"folders"in e}n.d(t,{l:function(){return o},k:function(){return r}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.VIEW="view"}(o||(o={}))},90170:function(e,t,n){"use strict";var o;function r(e,t,n){var o=Math.min(e,t),r=Math.max(e+1,t+1);return n.splice(o,r-o)}function a(e,t){t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));n>-1&&e.splice(n,1)}))}function i(e,t){t.forEach((function(t){-1===e.findIndex((function(e){return e.id===t.id}))&&e.push(t)}))}n.d(t,{RT:function(){return o},Jm:function(){return r},wh:function(){return a},AW:function(){return i}}),function(e){e.EVERYTHING="everything",e.LOADED="loaded"}(o||(o={}))},60787:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]",function(){return n(1498)}])},26929:function(e,t,n){e.exports=n(95798)}},function(e){e.O(0,[9774,2888,179],(function(){return t=60787,e(e.s=t);var t}));var t=e.O();_N_E=t}]);